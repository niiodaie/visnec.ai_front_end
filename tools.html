<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VNX Tools</title>
  <link rel="stylesheet" href="main.css" />
  <style>
    .filter-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
      justify-content: center;
    }
    .filter-btn {
      background: #eee;
      border: none;
      padding: 0.4rem 0.9rem;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 500;
    }
    .filter-btn.active {
      background: #3b82f6;
      color: white;
    }
    .tool {
      display: none;
    }
    .tool.show {
      display: block;
    }
  </style>
</head>
<body>
  <p><a href="index.html">‚Üê Back to Home</a></p>
  <h1>üöÄ VNX Tools</h1>

  <div class="filter-bar" id="filterBar"></div>
  <div class="grid" id="toolList"></div>

  <script>
    fetch('tools.json')
      .then(res => res.json())
      .then(tools => {
        const tags = new Set();
        tools.forEach(t => t.tags.forEach(tag => tags.add(tag)));

        const filterBar = document.getElementById('filterBar');
        const toolList = document.getElementById('toolList');

        // Render tag buttons
        const allBtn = document.createElement('button');
        allBtn.textContent = 'All';
        allBtn.className = 'filter-btn active';
        allBtn.onclick = () => {
          document.querySelectorAll('.tool').forEach(div => div.classList.add('show'));
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          allBtn.classList.add('active');
        };
        filterBar.appendChild(allBtn);

        tags.forEach(tag => {
          const btn = document.createElement('button');
          btn.textContent = tag;
          btn.className = 'filter-btn';
          btn.onclick = () => {
            document.querySelectorAll('.tool').forEach(div => {
              const matches = div.dataset.tags.includes(tag);
              div.classList.toggle('show', matches);
            });
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
          };
          filterBar.appendChild(btn);
        });

        // Render tools
        tools.forEach(tool => {
          const div = document.createElement('div');
          div.className = 'tool show';
          div.dataset.tags = tool.tags.join(',');

          div.innerHTML = `
            <h2>${tool.emoji} ${tool.name}</h2>
            <p>${tool.description}</p>
            <p><strong>Status:</strong> <span class="${tool.status === 'live' ? 'featured' : 'coming'}">${tool.status}</span></p>
            <div class="tags">${tool.tags.map(tag => `<span class="badge">${tag}</span>`).join(' ')}</div>
            <p><a href="${tool.url}" target="_blank">Visit Tool</a></p>
          `;
          toolList.appendChild(div);
        });
      })
      .catch(err => {
        document.getElementById('toolList').innerHTML = '<p style="color:red;">‚ö†Ô∏è Failed to load tools.</p>';
        console.error(err);
      });
  </script>
</body>
</html>
